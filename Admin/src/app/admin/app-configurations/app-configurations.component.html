<div
    class="sticky top-0 z-10 w-full bg-white bg-opacity-10 backdrop-blur-md shadow-lg py-4 px-6 flex justify-end items-center rounded-lg">
    <button type="button"
        class="px-3 py-2 text-xs font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:outline-none dark:bg-green-600 dark:hover:bg-green-700 uppercase"
        (click)="onUpdateAppConfigurations()">
        Update
    </button>
</div>
<div class="container mx-auto relative mt-8 mb-15">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 w-full">
        <div class="relative h-[60vh] bg-white rounded-lg shadow-md overflow-auto group hover:shadow-lg transition duration-300"
            *ngIf="appConfigurations.hero">
            <div class="bg-gray-50 p-6 rounded-lg space-y-6 w-full lg:w-auto h-full">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">Landing Hero Section</h2>
                <div class="flex items-center space-x-4 relative">
                    <img src={{appConfigurations.hero.image}} alt="Hero Image"
                        class="w-full h-auto object-cover rounded-md" /> <span
                        class="absolute top-0 left-0 p-3 text-white">Hero Image</span>
                </div>
                <div>
                    <label for="image" class="block text-sm font-medium text-gray-700">Update Hero Image</label>
                    <input type="file" id="image" name="image" accept="image/*"
                        class="mt-2 block w-full text-sm text-gray-500 border border-gray-300 rounded-md file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" 
                        (change)="onUpdateHeroImage($event)"/>
                </div>
                <div>
                    <label for="content" class="block text-sm font-medium text-gray-700">Description</label>
                    <textarea [(ngModel)]="appConfigurations.hero.description" id="content" name="content" rows="6"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                        placeholder="Write your Description here..." required></textarea>
                </div>
            </div>
        </div>
        <!-- <div class="relative h-[60vh] bg-white rounded-lg shadow-md overflow-auto group hover:shadow-lg transition duration-300"
            *ngIf="appConfigurations.configurations">
            <div class="bg-gray-50 p-6 rounded-lg shadow space-y-6 w-full lg:w-auto h-full">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">Configurations</h2>
                <div>
                    <label class="flex items-center cursor-pointer place-content-between">
                        <span class="text-sm "><span class="font-medium text-black">Contact Number </span> (do you
                            want to show contact number on the Nav Bar?)</span>
                        <div>
                            <input type="checkbox" value="" class="sr-only peer"
                                [(ngModel)]="appConfigurations.configurations.showContactNumber" />
                            <div
                                class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600">
                            </div>
                        </div>
                    </label>
                </div>
                <div>
                    <label for="slug" class="block text-sm font-medium text-gray-700">Admin Mobile Number</label>
                    <input [(ngModel)]="appConfigurations.configurations.adminNumber" type="text" id="adminNumber"
                        name="adminNumber"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                        placeholder="Enter Phone Number" required />
                </div>
            </div>
        </div> -->
        <div class="relative h-[60vh] bg-white rounded-lg shadow-md overflow-auto hover:shadow-lg transition duration-300"
            *ngIf="appConfigurations.exploreCities">
            <div class="bg-gray-50 p-6 rounded-lg space-y-6 w-full lg:w-auto h-full">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-gray-800">Feature Cities</h2>
                    <button type="button"
                        class="px-3 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:outline-none flex"><fa-icon
                            [icon]="faPlus"></fa-icon></button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2">
                    <div *ngFor="let city of appConfigurations.exploreCities.citiesDetails"
                        class="rounded-lg cursor-pointer">
                        <div
                            class="relative aspect-square bg-white rounded-lg shadow-md overflow-hidden group hover:shadow-lg transition duration-300">
                            <img src="{{city.image}}" alt="City Image"
                                class="absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                            <div
                                class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-75">
                            </div>
                            <div class="absolute bottom-4 left-4 text-white">
                                <h2 class="text-lg">{{ city.name }}</h2>
                            </div>
                            <div class="flex items-center space-x-2 absolute top-4 right-4">
                                <button type="button"
                                    class="px-3 py-2 text-xs font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:outline-none flex">
                                    <fa-icon [icon]="faTrash"></fa-icon>
                                </button>
                                <button type="button"
                                    class="px-3 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:outline-none flex">
                                    <fa-icon [icon]="faEdit"></fa-icon>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="relative h-[60vh] bg-white rounded-lg shadow-md overflow-auto group hover:shadow-lg transition duration-300"
            *ngIf="appConfigurations.testimonials">
            <div class="bg-gray-50 p-6 rounded-lg space-y-6 w-full lg:w-auto h-full">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-gray-800">Testimonials</h2>
                    <button type="button"
                        class="px-3 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:outline-none flex"
                        (click)="makeActiveModal('testimonialModal', 'add', customTemplate)"><fa-icon
                            [icon]="faPlus"></fa-icon></button>
                </div>
                <div *ngIf="appConfigurations.testimonials && appConfigurations.testimonials.length">
                    <div *ngFor="let testimonial of appConfigurations.testimonials; let i = index;"
                        class="hover:bg-slate-300 rounded-lg p-4 cursor-pointer">
                        <div class="flex items-center space-x-4 my-2">
                            <img src={{testimonial.image}} alt="Testimonial Image"
                                class="w-16 h-16 object-cover rounded-full" />
                            <div class="w-full">
                                <div class="flex items-center place-content-between">
                                    <h3 class="text-lg font-semibold">{{testimonial.name}}</h3>
                                    <span class="space-x-1">
                                        <span>{{testimonial.rating}}</span>
                                        <fa-icon [icon]="faStar" class="text-red-500 cursor-pointer"></fa-icon>
                                    </span>
                                </div>
                                <p class="text-sm text-gray-500">{{testimonial.review}}</p>
                                <p class="text-sm">{{testimonial.description}}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button type="button"
                                class="px-3 py-2 text-xs font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:outline-none flex" (click)="onDeleteTesimonial(i)"><fa-icon
                                    [icon]="faTrash"></fa-icon></button>
                            <button type="button"
                                class="px-3 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:outline-none flex" (click)="onEditTesimonial(testimonial, customTemplate, i)"><fa-icon
                                    [icon]="faEdit"></fa-icon></button>
                        </div>
                    </div>
                </div>
                <div *ngIf="!appConfigurations.testimonials || !appConfigurations.testimonials.length" class="text-center h-full flex items-center justify-center">
                    <span>No Testimonials Found</span>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-container *ngIf="activeModal.activeState">
    <div class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl">{{activeModal.text}}</h2>
                <button class="text-gray-500 hover:text-gray-700" (click)="false" aria-label="Close Modal"
                    (click)="activeModal.activeState = false">
                    ✕
                </button>
            </div>
            <ng-container *ngTemplateOutlet="dynamicModalTemplate">
            </ng-container>
        </div>
    </div>
</ng-container>


<ng-template #customTemplate>
    <div class="space-y-4">
        <div>
            <label for="name" class="block text-sm font-medium text-gray-700">User Full Name: </label>
            <input type="text" id="name" name="name"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                placeholder="Enter User Full Name" required 
                [(ngModel)]="activeModal.dataModel['name']"
                />
        </div>
        <div class="flex space-x-3">
            <div>
                <img src="{{activeModal.dataModel['image']}}" alt="Testimonial Image"
                    class="w-16 h-16 object-cover rounded-full" />
            </div>
            <div>
                <label for="image" class="block text-sm font-medium text-gray-700">Update User Picture</label>
                <input type="file" id="image" name="image" accept="image/*"
                    class="mt-2 block w-full text-sm text-gray-500 border border-gray-300 rounded-md file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" 
                    (change)="onTestimonialUserFileinput($event)"
                    />
            </div>
        </div>
        <div>
            <label for="rating" class="block text-sm font-medium text-gray-700">Rating: </label>
            <input type="number" id="rating" name="rating"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                placeholder="Enter User Rating" required 
                [(ngModel)]="activeModal.dataModel['rating']"
                />
        </div>
        <div>
            <label for="review" class="block text-sm font-medium text-gray-700">Review: </label>
            <input type="text" id="review" name="review"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                placeholder="Enter User Review" required 
                [(ngModel)]="activeModal.dataModel['review']"
                />
        </div>
        <div>
            <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
            <textarea id="description" name="description" rows="6"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border-none"
                placeholder="Write Description here..." required
                [(ngModel)]="activeModal.dataModel['description']"
                ></textarea>
        </div>
        <div class="text-right">
            <button type="button"
                class="px-3 py-2 text-xs font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:outline-none dark:bg-green-600 dark:hover:bg-green-700 uppercase" (click)="activeModal.mode == 'add' ? onAddTestimonial(activeModal.dataModel) : onUpdateTestimonial(activeModal.dataModel)">
                {{activeModal.mode == 'add' ? 'Submit': 'Update'}}
            </button>
        </div>
    </div>
</ng-template>